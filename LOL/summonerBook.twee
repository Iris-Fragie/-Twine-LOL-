:: multiplePopUpTabScript [script]

//å¯åˆ‡æ¢tabçš„å¼¹çª—
/*éœ€è¦å‡ ä¸ªå¼¹çª—åˆ‡æ¢ï¼Œå°±è®¾å‡ ä¸ªIDï¼Œç„¶åå†™å¯¹åº”çš„å¼¹çª—é¡µé¢åï¼ˆæ³¨æ„ï¼šéœ€è¦ä¸€ä¸ªåŒåçš„é¡µé¢ï¼‰
*/
window.multiplePopUpTab = function(page, ID) {
    let content = "";
    let pages = {};

    switch (ID) {
        case "1":
            pages = {
                page1: "ä»»åŠ¡",
                page2: "æˆå°±",
              	page3: "å›¾é‰´",
              	page4: "æ€ç»ª",
              	page5: "ç»Ÿè®¡"
            };
            break;
        case "2":
            pages = {
                page1: "ä¼ é—»",
                page2: "æœªå®Œæˆä»»åŠ¡",
                page3: "å·²å®Œæˆä»»åŠ¡"
            };
            break;
        default:
            content = `
                <div class="popup-content">
                    <p>æœªçŸ¥é¡µé¢ã€‚</p>
                </div>
            `;
    }

    if (pages[page]) {
        content = Story.get(pages[page]).processText(); 
    } else {
        console.error("æœªçŸ¥é¡µé¢ï¼");
        return;
    }

    if (ID === "1") {
        Dialog.create(`
            <div class="title-buttons">
                <button onclick="multiplePopUpTab('page1', '1')" class="popup-button ${page === 'page1' ? 'active' : ''}">ä»»åŠ¡</button>
                <button onclick="multiplePopUpTab('page2', '1')" class="popup-button ${page === 'page2' ? 'active' : ''}">æˆå°±</button>
                <button onclick="multiplePopUpTab('page3', '1')" class="popup-button ${page === 'page3' ? 'active' : ''}">å›¾é‰´</button>
                <button onclick="multiplePopUpTab('page4', '1')" class="popup-button ${page === 'page4' ? 'active' : ''}">æ€ç»ª</button>
                <button onclick="multiplePopUpTab('page5', '1')" class="popup-button ${page === 'page5' ? 'active' : ''}">ç»Ÿè®¡</button>
            </div>
        `, "map-dialog");
    } else if (ID === "2") {
        Dialog.create(`
            <div class="title-buttons">
                <button onclick="multiplePopUpTab('page1', '2')" class="popup-button ${page === 'page1' ? 'active' : ''}">ä¼ é—»</button>
                <button onclick="multiplePopUpTab('page2', '2')" class="popup-button ${page === 'page2' ? 'active' : ''}">æœªå®Œæˆä»»åŠ¡</button>
                <button onclick="multiplePopUpTab('page3', '2')" class="popup-button ${page === 'page3' ? 'active' : ''}">å·²å®Œæˆä»»åŠ¡</button>
            </div>
        `, "map-dialog");
    }

    Dialog.wiki(content);
    Dialog.open();
};

:: ä»»åŠ¡ {"position":"1425,200","size":"100,100"}
<h3>= ä¸»çº¿ä»»åŠ¡ =</h3>
<<if $MainMission.complete>>
    <p><font color="green">âœ“ $MainMission.name - å·²å®Œæˆ</font></p>
<<else>>
    <p><strong>$MainMission.name</strong></p>
    <<set _stage = $MainMission.stages[$MainMission.currentStage]>>
    <<if _stage>>
        <div style="border-left: 3px solid #FFB90F; padding-left: 10px; margin: 10px 0;">
            <p><strong>å½“å‰é˜¶æ®µ <<= $MainMission.currentStage + 1>>/<<= $MainMission.stages.length>></strong></p>
            <p><<= _stage.name>> - <<= _stage.description>></p>
            <<if !_stage.complete>>
                <p><font color="orange">[è¿›è¡Œä¸­]</font></p>
            <<else>>
                <p><font color="green">[å·²å®Œæˆ]</font></p>
            <</if>>
        </div>
    <</if>>
<</if>>

<h3>= æ´»è·ƒå§”æ‰˜ =</h3>
<<if $ActiveMissions.length > 0>>
    <<for _task range $ActiveMissions>>
        <div style="border: 1px solid #ccc; padding: 10px; margin: 5px 0; background: #f9f9f9; color: #333;">
            <strong><<= _task.name || _task.id + "å§”æ‰˜">></strong> - 
            <<if _task.complete>>
                <font color="green">[å·²å®Œæˆï¼Œå¯äº¤ä»˜]</font>
            <<else>>
                <font color="orange">[è¿›è¡Œä¸­]</font>
            <</if>>
            <<if _task.type === "collect" && _task.requiredItem>>
                <p>éœ€è¦<<= _task.requiredItemName>>ï¼š<<= _task.requiredCount>>ä¸ªï¼ˆç›®å‰æœ‰<<= $player.count(_task.requiredItem)>>ä¸ªï¼‰</p>
                <p>å¥–åŠ±ï¼š<<= _task.reward>>é‡‘å¸</p>
            <</if>>
        </div>
    <</for>>
<<else>>
    <p><font color="grey">æš‚æ— æ´»è·ƒå§”æ‰˜</font></p>
<</if>>

<p style="margin-top: 15px;"><em>å‰å¾€ä»»åŠ¡å¤§å…æ¥å–æˆ–äº¤ä»˜å§”æ‰˜</em></p>




:: å›¾é‰´ {"position":"1675,200","size":"100,100"}
C


:: å¯¹è¯1 {"position":"625,475","size":"100,100"}
<<include æµ‹è¯•å‰§æƒ…1>>

<<dialogue tree1 'æµ‹è¯•åå­—' 'img/aaa.jpg'>>


:: æ€ç»ª {"position":"1825,200","size":"100,100"}
D


:: æˆå°± {"position":"1550,200","size":"100,100"}
<<achievementspopup>>


:: ç»Ÿè®¡ {"position":"1950,200","size":"100,100"}
<div style="padding: 15px; background: #f5f5f5; color: #333; border-radius: 8px;">
    <h2 style="text-align: center; color: #2c5aa0; margin-bottom: 20px;">ğŸ“Š æ¸¸æˆç»Ÿè®¡</h2>
    
    <div style="background: white; padding: 15px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #ff6b6b; margin-bottom: 10px;">ğŸ½ï¸ ç¾é£Ÿæ¢ç´¢</h3>
        <p style="font-size: 18px; margin: 5px 0;">
            å·²å“å°ç‹¬ç‰¹é£Ÿç‰©ï¼š<strong style="color: #ff6b6b;"><<= $uniqueFoodsEaten.length>></strong> ç§
        </p>
        <<if $uniqueFoodsEaten.length >= 5>>
            <p style="font-size: 14px; color: #666; margin: 5px 0;">
                ï¼ˆä½“åŠ›ä¸Šé™å¥–åŠ±ï¼š+<<= $foodMilestonesReached * 10>> ç‚¹ï¼‰
            </p>
        <</if>>
    </div>
    
    <div style="background: white; padding: 15px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #95e1d3; margin-bottom: 10px;">â° æ—¶é—´è®°å½•</h3>
        <p style="font-size: 18px; margin: 5px 0;">
            æ¸¸æˆå†…å·²è¿‡å¤©æ•°ï¼š<strong style="color: #95e1d3;"><<= $day>></strong> å¤©
        </p>
        <p style="font-size: 14px; color: #666; margin: 5px 0;">
            å½“å‰æ—¶é—´ï¼šç¬¬ $year å¹´ $month æœˆ $day æ—¥ $showHour:$formattedMinute
        </p>
    </div>
    
    <div style="background: white; padding: 15px; margin: 10px 0; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: #ffd93d; margin-bottom: 10px;">â­ ä»»åŠ¡æˆå°±</h3>
        <p style="font-size: 16px; margin: 5px 0;">
            å®Œæˆå§”æ‰˜æ•°ï¼š<strong style="color: #ffd93d;"><<= $MissionStats.Success>></strong> ä¸ª
        </p>
        <p style="font-size: 16px; margin: 5px 0;">
            åå£°å€¼ï¼š<strong style="color: #ffd93d;"><<= $MissionStats.Fame>></strong>
        </p>
    </div>
</div>